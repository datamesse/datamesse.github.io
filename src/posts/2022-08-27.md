---
title: Creating a decorated scatterplot visual using Deneb and Power BI
tag: logo-powerbi
date: August 27, 2022
---

This is my second attempt with Deneb, and this time I've designed a more advanced and fancier zoomable scatterplot. The centre of the axis represents Earth, and the data points around it represent satellites, whereby their distance from the centre reflects their average orbital distance from Earth, and their circumferential position relative to the centre reflects the year they were launched.


The final Power BI report *"Satellite launch overview"* is available here:
* **[https://community.powerbi.com/t5/Data-Stories-Gallery/Satellite-launch-overview/m-p/2730077](https://community.powerbi.com/t5/Data-Stories-Gallery/Satellite-launch-overview/m-p/2730077)**


![My Power BI visualisation](https://github.com/datamesse/datamesse.github.io/blob/main/src/assets-portfolio/img-2022-08-satellite-launch-overview.gif?raw=true)

### Requirements

Deneb is a highly flexible custom visual developed by **[Daniel Marsh-Patrick](https://twitter.com/the_d_mp)** that can be used to create unique visualisations for Power BI reports with JSON-based syntaxes; Vega or Vega-lite.

Deneb can be downloaded from the Microsoft App Store:

* **[https://appsource.microsoft.com/en-US/product/power-bi-visuals/coacervolimited1596856650797.deneb?tab=Overview](https://appsource.microsoft.com/en-US/product/power-bi-visuals/coacervolimited1596856650797.deneb?tab=Overview)**

The official website for Deneb:

* **[https://deneb-viz.github.io/](https://deneb-viz.github.io/)**

Two satellite datasets were merged together for my report, but this custom visual design only uses the one from the Union of Concerned Scientists:

* **[https://www.ucsusa.org/resources/satellite-database](https://www.ucsusa.org/resources/satellite-database)**

For more information on my dataset merge using Power Query, see my Github:

* **[https://github.com/datamesse/data-visualisation-datasets/tree/main/Satellite%20launch%20overview](https://github.com/datamesse/data-visualisation-datasets/tree/main/Satellite%20launch%20overview)**


### Inspiration

The main inspirations for this custom visual are these Tableau Public community gallery visualisations:

* [Yuli Wang's :](https://twitter.com/Yuli_Wg) **[50 years of Chinese Aerospace](https://public.tableau.com/app/profile/yuri.wg/viz/50_15655374759590/1)**

![Tableau satellite report by Yuli Wang](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--01.png?raw=true)

* [Wendy Shijia's :](https://twitter.com/ShijiaWendy) **[50 Years of China's Space Journey](https://public.tableau.com/app/profile/wendy.shijia/viz/50YearsofChinasSpaceJourney/50yrsChinasSpaceJourney)**

![Tableau satellite report by Wendy Shijia](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--01a.png?raw=true)

* [Jean-Paul Frenett's :](https://public.tableau.com/app/profile/jean.paul.frenett) **[Satellites of Earth](https://public.tableau.com/app/profile/jean.paul.frenett/viz/SatellitesofEarth/SatellitesinOrbit)**

![Tableau satellite report by Jean-Paul Frenett](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--02.png?raw=true)

* [Lubos Pribula's :](https://twitter.com/LubosPribula) **[Traffic Overhead](https://public.tableau.com/app/profile/lubospribula/viz/TrafficOverhead/TrafficOverhead)**

![Tableau satellite report by Lubos Pribula](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--03.png?raw=true)


## BUILDING THE SATELLITE CUSTOM VISUAL USING DENEB


### Step 1: Set up the data and custom columns needed to plot each satellite 

Follow the Power Query code from my Github repository (mentioned in the Requirements above) to import the data into Power BI.
The end result should be a single dimension table.

From Report view, add the following custom columns to that dimension table using DAX:

**Cos**

```
Cos = 
VAR EarliestLaunch = CALCULATE(MIN(Satellites[Launch date]), ALLEXCEPT(Satellites,Satellites[Record type]))
VAR LatestLaunch = CALCULATE(MAX(Satellites[Launch date]), ALLEXCEPT(Satellites,Satellites[Record type]))
VAR Angle = IF(ISBLANK([Orbit class]) = FALSE, 
               (1.5 * PI() *
                (INT(Satellites[Launch date] - EarliestLaunch)) 
                 /
                (INT(LatestLaunch - EarliestLaunch))),
               BLANK()
            )
VAR OrbitRadius = 
    SWITCH([Orbit class],
           "Low Earth Orbit", Satellites[Distance (km)],
           "Medium Earth Orbit", Satellites[Distance (km)],
           "Geostationary Transfer Orbit", Satellites[Distance (km)],
           "Geosynchronous Equatorial Orbit", Satellites[Distance (km)],
           BLANK()
    )
RETURN IF(ISBLANK(Satellites[Orbit class]) = FALSE, (COS(Angle) * (OrbitRadius)))
```

**Sin**

```
Sin = 
VAR EarliestLaunch = CALCULATE(MIN(Satellites[Launch date]), ALLEXCEPT(Satellites,Satellites[Record type]))
VAR LatestLaunch = CALCULATE(MAX(Satellites[Launch date]), ALLEXCEPT(Satellites,Satellites[Record type]))
VAR Angle = IF(ISBLANK([Orbit class]) = FALSE, 
               (1.5 * PI() *
                (INT(Satellites[Launch date] - EarliestLaunch)) 
                 /
                (INT(LatestLaunch - EarliestLaunch))),
               BLANK()
            )
VAR OrbitRadius = 
    SWITCH([Orbit class],
           "Low Earth Orbit", Satellites[Distance (km)],
           "Medium Earth Orbit", Satellites[Distance (km)],
           "Geostationary Transfer Orbit", Satellites[Distance (km)],
           "Geosynchronous Equatorial Orbit", Satellites[Distance (km)],
           BLANK()
    )
RETURN IF(ISBLANK(Satellites[Orbit class]) = FALSE, (SIN(Angle) * (OrbitRadius)))
```

The idea behind using Sin and Cos for the calculations to map the satellites as a scatterplot is based on Yuli Wang's Tableau Public report. That report additionally (and very cleverly) removes the scaled distance of outlier satellites with average distances tremendously greater than the others, and in doing so is able to fit all the satellites onscreen in a neat and ordered way.

However, the approach we will take is to deliberately show that scaled distance, even if the outliers are not immediately seen. As at the time of writing, Tableau is unable to zoom freely to resize what is seen onscreen, whereas Power BI can via Deneb and Vega-Lite, and in a way enhances the user's experience to be able to see and interact with that scale.

As a next step, import Deneb into your report, adding an instance of it to the page, and resize it to the full screen. Add the fields from the dimension table to the deneb visual as per screenshot below.

![Power BI: Adding dimension fields to the Deneb custom visual](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--04.png?raw=true)


### Step 2: Create your planet Earth image base64 code

Next find a .png image of Earth that will be used as the centre axis i.e. the origin (0,0).

In my case, I used this Earth image by PIRO4D from pixabay.com 

* **[https://pixabay.com/photos/earth-globe-sea-trenches-2314687/](https://pixabay.com/photos/earth-globe-sea-trenches-2314687/)**

![Earth globe sea trenches](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--05.png?raw=true)

If the image you want to use doesn't have a transparent background, you can use an online tool such as **[https://onlinepngtools.com/crop-png](https://onlinepngtools.com/crop-png)** to trim out that background.

![Trim out background part of the image](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--06.png?raw=true)

Note that the larger the image, the more code it will generate when converted to base64, which in turn impacts the performance of the Deneb code for editing and rendering. You can use an online tool such as **[https://onlinepngtools.com/resize-png](https://onlinepngtools.com/resize-png)** to resize it, in my case to 50 x 50 pixels.

![Resize the image](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--07.png?raw=true)

Then lastly, use an online tool such as [https://www.browserling.com/tools/image-to-base64](https://www.browserling.com/tools/image-to-base64) to convert the trimmed .png image to base64 code.

![Generate base64 code for the image](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--08.png?raw=true)

Copy out the base64 code and save it e.g. to a .txt file, as we will use it a little later.

In my case, you can download the base64 code I used from my Github repository:

* **[https://raw.githubusercontent.com/datamesse/data-visualisation-datasets/main/Satellite%20launch%20overview/images/base64code%20for%20earth-50x50.txt](https://raw.githubusercontent.com/datamesse/data-visualisation-datasets/main/Satellite%20launch%20overview/images/base64code%20for%20earth-50x50.txt)**


### Step 3: Set a dark background for the entire report canvas

You can either set a solid black or other dark coloured background.

In my case, I used this galaxy wallpaper image by Adrien Olichon from pexels.com

* **[https://www.pexels.com/photo/galaxy-wallpaper-2538107/](https://www.pexels.com/photo/galaxy-wallpaper-2538107/)**

![Galaxy wallpaper](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--09.png?raw=true)

![Power BI add background image](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--10.png?raw=true)

The colour palette we will use for the actual custom visual is lighter to contrast with the dark background.


### Step 4: Begin setting up the core Vega-lite code for the Deneb visual

There will be multiple layers of Vega-lite code placed on top of each other to create this visual.

Begin by clearing out the defaulted code, and replace it with the following core code:

```
{ "background": "null",
  "view": {"fill": "#0B0D14", 
           "fillOpacity": 0 },
  "data": {"name": "dataset"},
  "layer": [
  ],
  "config": {
    "legend": {"title": "null",
               "titleColor": "#ffffff",
               "labelColor": "#ffffff",
               "labelFontSize": 10,
               "labelFont": "Consolas",
               "orient": "top-left",
               "labelLimit": 260  }
  }
}
```

![Deneb: Adding the core code structure](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--11.png?raw=true)

Our next steps will be to fill in the **"layer": [ ]** array with multiple layers to complete the visual.

So the layer code structure will appear like this:

```
{ "background": "null",
  "view": {"fill": "#0B0D14", 
           "fillOpacity": 0 },
  "data": {"name": "dataset"},
  "layer": [
            { JSON code for layer 5 e.g. axis label to display year of satellite launch },
            { JSON code for layer 9 e.g. axis label to display average orbital distance from Earth },
            { JSON code for layer 2 e.g. x-axis line },
            { JSON code for layer 1 e.g. Earth image },
            { JSON code for layer 4 e.g. scatterplot data points for the satellites },
  ],
  "config": {
    "legend": {"title": "null",
               "titleColor": "#ffffff",
               "labelColor": "#ffffff",
               "labelFontSize": 10,
               "labelFont": "Consolas",
               "orient": "top-left",
               "labelLimit": 260  }
  }
}
```

The logic behind how each layer is constructed is outlined below.


### Step 5: Layer 1 - Adding planet Earth to the centre of the axis

We want to place the image in the centre of the axis i.e. at the origin, coordinates (0,0).

Whilst building this visual, I've tried providing the raw value of 0, but this does not appear to work, presumably because it does not reference an actual data record.

The workaround I came up with was to perform a generalised aggregate calculation across all records, in this case, the maximum value of the Sin field, and create a separate calculation to multiply that aggregate with zero, to get the zero-value needed for axis mapping.

```
{ "transform": [
      { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
      { "calculate": "datum.max_sin * 0", "as": "origin zero" } ],
```               

Then we encode the data point's x and y axis to the calculation's zero value.

```
"encoding": { "x": { "aggregate": "median",
                     "field": "origin zero",
                     "type": "quantitative"},
              "y": { "aggregate": "median",
                     "field": "origin zero",
                     "type": "quantitative"},
```

Lastly, we embed the Earth image's base64 code.


**Layer code to add to visual:**

```
{ "transform": [
       { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
       { "calculate": "datum.max_sin * 0", "as": "origin zero" } ],
  "mark": {"type": "image",
           "width": 75,
           "height": 75},
  "encoding": { "x": { "aggregate": "median",
                       "field": "origin zero",
                       "type": "quantitative"},
                "y": { "aggregate": "median",
                       "field": "origin zero",
                       "type": "quantitative"},
                "url": { "datum": "data:image/png;base64, << replace this message with your base64 code >>",
                         "type":  "nominal"}
              }
}
```

**Note:** Because the base64 code is long, I've excluded it from the code above, but you would just copy-and-paste it in place of the << >> message, as per screenshot below

![Deneb: Adding the Earth layer code](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--12.png?raw=true)


### Step 6: Layers 2 & 3 - Adding the lines for the x and y axis

Following the same multiply by zero calculation logic of the previous layer, we can create "rule"-type marks to draw out the lines for the x and y axis.

**Layer code to add to visual:**

Add this code above the Earth layer, so that the lines are hidden behind the Earth image as they pass through it.

The further down you place an element within the **"layer": [ ]** array, the more it is "on top" of other layers.

```
{ "transform": [
      { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
      { "calculate": "datum.max_sin * 0", "as": "x-axis zero for vertical rule" } ],
  "mark": {"type": "rule",
           "strokeDash": [1, 10],
           "strokeDashOffset": 50000},
  "encoding": { "x": { "field": "x-axis zero for vertical rule",
                       "type": "quantitative"},
                       "color": {"value": "#9DA4AC"},
                       "size": {"value": 1} }
  },
{ "transform": [
      { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
      { "calculate": "datum.max_sin * 0", "as": "y-axis zero for horizontal rule" } ],
  "mark": {"type": "rule",
           "strokeDash": [1, 10],
           "strokeDashOffset": 50000},
  "encoding": { "y": { "field": "y-axis zero for horizontal rule",
                       "type": "quantitative"},
                       "color": {"value": "#9DA4AC"},
                       "size": {"value": 1} }
},
```

![Deneb: Adding the x axis and y axis layer codes](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--13.png?raw=true)


### Step 7: Layer 4 - Adding scatterplot data points for the satellite data

This is the most important layer of the visual, as it enables zoom in and out with the user's mouse scroll wheel, and is based on an official Vega-Lite example called the *Scatterplot Pan & Zoom*.

* **[https://vega.github.io/vega-lite/examples/selection_translate_scatterplot_drag.html](https://vega.github.io/vega-lite/examples/selection_translate_scatterplot_drag.html)**

The concept is to bind the scales as a parameter, and use the axis' **"scale": {"domain"}** attribute to define a default zoom setting, which the user can get back to after scrolling, by double-clicking the visual.

The x-axis and y-axis are mapped to the satellite's **Sin** and **Cos** values respectively

```
{ "params": [{ "name": "grid",
               "select": "interval",
               "bind": "scales"},
             { "name": "legend",
               "select": {"type": "point", "fields": ["Orbit class"]},
               "bind": "legend"} ],
  "mark": { "type": "point", 
            "shape": "circle",
            "tooltip": true,
            "filled": true,
            "fillOpacity": 0.75},
  "encoding": { "x": {"field": "Sin", 
                      "type": "quantitative",
                      "title": false, 
                      "axis": {"disable": true,
                               "grid": false,
                               "labels": false},
                               "scale": {"domain": [-70400,70050]}},
                "y": {"field": "Cos", 
                      "type": "quantitative",
                      "title": false, 
                      "axis": {"disable": true,
                               "grid": false,
                               "labels": false},
                               "scale": {"domain": [-69540,60370]}},
```

In this case, we've additionally defined a legend bind as an extra **params** element so that selecting an orbit class in the legend highlights satellite data points for that class.

By default, Vega-Lite sorts a column's values alphabetically, but you can manually define the sort order, as well as the colour scheme.

```
"color": { "field": "Orbit class",
           "type": "nominal",
           "sort": ["Geostationary Transfer Orbit", "Geosynchronous Equatorial Orbit", "Medium Earth Orbit", "Low Earth Orbit"],
           "scale": {"range": ["#C8F6FF", "#8DECFF", "#2DDBFF", "#11BBDE"]} },
```


**Layer code to add to visual:**

Add this code below the Earth layer, so it is the last element in the **"layer": [ ]** array. This allows users to easily hover over the data points and show tooltips without the interference of other layers.

```
{ "params": [{ "name": "grid",
               "select": "interval",
               "bind": "scales"},
             { "name": "legend",
               "select": {"type": "point", "fields": ["Orbit class"]},
               "bind": "legend"} ],
  "mark": { "type": "point", 
            "shape": "circle",
            "tooltip": true,
            "filled": true,
            "fillOpacity": 0.75},
  "encoding": { "x": {"field": "Sin", 
                      "type": "quantitative",
                      "title": false, 
                      "axis": {"disable": true,
                               "grid": false,
                               "labels": false},
                      "scale": {"domain": [-70400,70050]}},
                "y": {"field": "Cos", 
                      "type": "quantitative",
                      "title": false, 
                      "axis": {"disable": true,
                               "grid": false,
                               "labels": false},
                               "scale": {"domain": [-69540,60370]}},
                "size": {"value": 50},
                "color": { "field": "Orbit class",
                           "type":  "nominal",
                           "sort": [ "Geostationary Transfer Orbit", "Geosynchronous Equatorial Orbit", "Medium Earth Orbit", "Low Earth Orbit"],
                           "scale": {"range": ["#C8F6FF", "#8DECFF", "#2DDBFF", "#11BBDE" ]} },
                "opacity": { "condition": {"param": "legend", "value": 1},
                             "value": 0.025 },
                "tooltip": [ {"field": "Satellite catalog number (NORAD)", "type": "nominal", "title": "NORAD"},
                             {"field": "International designator (COSPAR)", "title": "COSPAR"},
                             {"field": "Name", "title": "SATELLITE"},
                             {"field": "Country", "title": "COUNTRY"},
                             {"field": "Purpose", "title": "PURPOSE"},
                             {"field": "Users", "title": "USERS"},
                             {"field": "Launch date", "title": "LAUNCH DATE", "type": "temporal", "format": "%d-%m-%Y (DMY)"},
                             {"field": "Status", "title": "STATUS"},
                             {"field": "Orbit class", "title": "ORBIT CLASS"},
                             {"field": "Distance (km)", "title": "AVERAGE DISTANCE (km)", "type": "nominal", "format": ",.0f"},
                             {"field": "Apogee (km)", "title": "APOGEE (km)", "type": "nominal", "format": ",.0f"},
                             {"field": "Perigee (km)", "title": "PERIGEE (km)", "type": "nominal", "format": ",.0f"},
                             {"field": "Launch site", "title": "LAUNCH SITE"},
                             {"field": "Launch vehicle", "title": "LAUNCH VEHICLE"}] }
}
```

![Deneb: Adding the scatterplot for satellite data points](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--14.png?raw=true)


### Step 8: Layers 5, 6, 7, and 8 - Adding year labels for the top, bottom, left, and right sides of the origin

Unfortunately, I was unable to figure out how to programmatically determine the years that reflect each side of the x and y axis.

Fortunately, we have the satellite data points onscreen, so we can just hover over the satellites which sit on each of the 4 axis points, and manually hardcode the year values as labels.

For example, there is only one satellite sitting on the positive y-axis, and its tooltip shows that its launch year is 1974

![Identify the year for positive y-axis](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--15.png?raw=true)

In this code we again use the multiply by zero calculation to align the position of the label, and define the distance of the label from the centre by applying the absolute function and multiply it with a fixed value of 50% the distance of the highest Sin value.

```
{ "transform": [
       { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
       { "calculate": "datum.max_sin * 0", "as": "x-axis zero" },
       { "calculate": "abs(datum.max_sin) * 0.5", "as": "y-axis top year" } ],
  "mark": {"type": "text",
           "style": "label",
           "angle": 0,
           "baseline": "top",
           "align": "center",
           "fontSize": 30 },
  "encoding": { "x": { "field": "x-axis zero",
                       "type": "quantitative"},
                "y": { "field": "y-axis top year",
                       "type": "quantitative"},
                       "text": {"value": "1974"},
                       "color": {"value": "#9DA4AC"} }
},
```

Then rinse-and-repeat for the 3 other points from the origin.

**Layer code to add to visual:**

Add these 4 layers for each of the 4 year labels, as the first elements in the **"layer": [ ]** array.

```
{ "transform": [
       { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
       { "calculate": "datum.max_sin * 0", "as": "x-axis zero" },
       { "calculate": "abs(datum.max_sin) * 0.5", "as": "y-axis top year" } ],
  "mark": {"type": "text",
           "style": "label",
           "angle": 0,
           "baseline": "top",
           "align": "center",
           "fontSize": 30 },
  "encoding": { "x": { "field": "x-axis zero",
                       "type": "quantitative"},
                "y": { "field": "y-axis top year",
                       "type": "quantitative"},
                       "text": {"value": "1974"},
                       "color": {"value": "#9DA4AC"} }
},
{ "transform": [
    { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
                    { "calculate": "datum.max_sin * 0", "as": "x-axis zero" },
                    { "calculate": "abs(datum.max_sin) * -1 * 0.6", "as": "y-axis bottom year" } ],
      "mark": {"type": "text",
               "style": "label",
               "angle": 0,
               "baseline": "bottom",
               "align": "center",
               "fontSize": 30 },
      "encoding": { "x": {"field": "x-axis zero",
                          "type":  "quantitative"},
                    "y": {"field": "y-axis bottom year",
                           "type":  "quantitative"},
                    "text": {"value": "2006"},
                    "color": {"value": "#9DA4AC"} }
},
{ "transform": [
    { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
                    { "calculate": "datum.max_sin * 0", "as": "y-axis zero" },
                    { "calculate": "abs(datum.max_sin) * 0.5", "as": "x-axis right year" } ],
      "mark": {"type": "text",
               "style": "label",
               "angle": 0,
               "baseline": "middle",
               "align": "center",
               "fontSize": 30 },
      "encoding": { "y": {"field": "y-axis zero",
                          "type":  "quantitative"},
                    "x": {"field": "x-axis right year",
                          "type":  "quantitative"},
                    "text": {"value": "1990"},
                    "color": {"value": "#9DA4AC"} }
},
{ "transform": [
    { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
                    { "calculate": "datum.max_sin * 0", "as": "y-axis zero" },
                    { "calculate": "abs(datum.max_sin) * -1 * 0.5", "as": "x-axis left year" } ],
      "mark": {"type": "text",
               "style": "label",
               "angle": 0,
               "baseline": "middle",
               "align": "center",
               "fontSize": 30 },
      "encoding": { "y": {"field": "y-axis zero",
                          "type":  "quantitative"},
                    "x": {"field": "x-axis left year",
                          "type":  "quantitative"},
                    "text": {"value": "2021"},
                    "color": {"value": "#9DA4AC"} }
},
```

![Deneb: Adding year labels for each of the 4 points of the origin](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--16.png?raw=true)


### Step 9: Layers 9 and more

The last part is to add multiple layers for each label along the axis to mark various satellite distances from Earth.

It is arbitrary how many labels you would like to add, but one idea is to include the minimum and maximum values for each Orbit class along each of the four axis parts, so that when a user zooms in, they have an idea of how many satellites fall within that min-max range.

Because the distance label will be marked along the axis, we need to filter the data by the year that part of the axis represents.
In this case, we are filtering by 2021 because we are using the negative part of the x-axis.

```
{ "timeUnit": "year", "field": "Launch date", "as": "date"},
{ "filter": "year(datum.date) == 2021"},
```

To suffix "km" to the distance value, simply concatenate it:

```
{ "calculate": "abs(round(datum.min_sin_GEO)) + 'km'", "as": "display GEO max 2021 kms"},
```

**Layer code to add to visual:**

Add this code between the years layers and the axis layers within the **"layer": [ ]** array.

This is an example of a single label, for the satellite in Geosynchronous Equatorial Orbit with the lowest average distance from Earth and launched in 2021.

```
{ "transform": [
          { "timeUnit": "year", "field": "Launch date", "as": "date"},
          { "filter": "year(datum.date) == 2021"},
          { "filter": {"field": "Orbit class", "equal": "Geosynchronous Equatorial Orbit"}},
          { "aggregate": [{"op": "min", "field": "Sin", "as": "min_sin_GEO"}] },
          { "calculate": "datum.min_sin_GEO * 0", "as": "y-axis zero" },
          { "calculate": "abs(round(datum.min_sin_GEO)) + 'km'", "as": "display GEO max 2021 kms"},
          { "calculate": "abs(datum.min_sin_GEO) * -1", "as": "x-axis GEO max 2021 distance" } ],
  "mark": {"type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "center", "fontSize": 16 },
  "encoding": { "y": {"field": "y-axis zero", "type":  "quantitative"},
                "x": {"field": "x-axis GEO max 2021 distance", "type": "quantitative"},
                "text": {"field": "display GEO max 2021 kms", "type": "nominal"},
                "color": {"value": "#AAB6C4"} }
},
```

![Deneb: Adding distance label](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--17.png?raw=true)

You can find more distance label layers in the completed code below.

An important note is to filter your data by Record type: "UCSUSA active observation", as the n2yo.com data does not have the average distance data, because most of those records are for decayed or unknown status satellites.

![Power BI: Apply filter to the Deneb visual](https://raw.githubusercontent.com/datamesse/datamesse.github.io/main/src/assets-blog/2022-08-27--18.png?raw=true)


## FINAL DENEB CODE

This is the final Deneb code for the custom code:

```
{"background": "null",
 "view": {"fill": "#0B0D14", 
          "fillOpacity": 0 },
 "data": {"name": "dataset"},
 "layer": [
     { "transform": [
            { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
            { "calculate": "datum.max_sin * 0", "as": "x-axis zero" },
            { "calculate": "abs(datum.max_sin) * 0.5", "as": "y-axis top year" } ],
       "mark": {"type": "text",
                "style": "label",
                "angle": 0,
                "baseline": "top",
                "align": "center",
                "fontSize": 30 },
       "encoding": { "x": {"field": "x-axis zero",
                           "type":  "quantitative"},
                     "y": {"field": "y-axis top year",
                           "type":  "quantitative"},
                     "text": {"value": "1974"},
                     "color": {"value": "#9DA4AC"} }
     },
     { "transform": [
            { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
            { "calculate": "datum.max_sin * 0", "as": "x-axis zero" },
            { "calculate": "abs(datum.max_sin) * -1 * 0.6", "as": "y-axis bottom year" } ],
       "mark": {"type": "text",
                "style": "label",
                "angle": 0,
                "baseline": "bottom",
                "align": "center",
                "fontSize": 30 },
       "encoding": { "x": {"field": "x-axis zero",
                           "type":  "quantitative"},
                     "y": {"field": "y-axis bottom year",
                           "type":  "quantitative"},
                     "text": {"value": "2006"},
                     "color": {"value": "#9DA4AC"} }
     },
     { "transform": [
            { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
            { "calculate": "datum.max_sin * 0", "as": "y-axis zero" },
            { "calculate": "abs(datum.max_sin) * 0.5", "as": "x-axis right year" } ],
       "mark": {"type": "text",
                "style": "label",
                "angle": 0,
                "baseline": "middle",
                "align": "center",
                "fontSize": 30 },
       "encoding": { "y": {"field": "y-axis zero",
                           "type":  "quantitative"},
                     "x": {"field": "x-axis right year",
                           "type":  "quantitative"},
                     "text": {"value": "1990"},
                     "color": {"value": "#9DA4AC"} }
     },
     { "transform": [
            { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
            { "calculate": "datum.max_sin * 0", "as": "y-axis zero" },
            { "calculate": "abs(datum.max_sin) * -1 * 0.5", "as": "x-axis left year" } ],
       "mark": {"type": "text",
                "style": "label",
                "angle": 0,
                "baseline": "middle",
                "align": "center",
                "fontSize": 30 },
       "encoding": { "y": {"field": "y-axis zero",
                           "type":  "quantitative"},
                     "x": {"field": "x-axis left year",
                           "type":  "quantitative"},
                     "text": {"value": "2021"},
                     "color": {"value": "#9DA4AC"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 1974"},
         { "filter": {"field": "Orbit class", "equal": "Low Earth Orbit"}},
         { "aggregate": [{"op": "min", "field": "Cos", "as": "min_sin_LEO"}] },
         { "calculate": "datum.min_sin_LEO * 0", "as": "x-axis zero" },
         { "calculate": "abs(round(datum.min_sin_LEO)) + 'km'", "as": "display LEO max 1974 kms"}, 
         { "calculate": "abs(datum.min_sin_LEO)", "as": "y-axis LEO max 1974 distance" } ],
       "mark": { "type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "left", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis LEO max 1974 distance", "type":  "quantitative"},
                     "x": {"field": "x-axis zero", "type":  "quantitative"},
                     "text": {"field": "display LEO max 1974 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 1990"},
         { "filter": {"field": "Orbit class", "equal": "Low Earth Orbit"}},
         { "aggregate": [{"op": "min", "field": "Sin", "as": "min_sin_LEO"}] },
         { "calculate": "datum.min_sin_LEO * 0", "as": "y-axis zero" },
         { "calculate": "abs(round(datum.min_sin_LEO)) + 'km'", "as": "display LEO max 1990 kms"}, 
         { "calculate": "abs(datum.min_sin_LEO)", "as": "x-axis LEO max 1990 distance" } ],
       "mark": {"type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "center", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis zero", "type":  "quantitative"},
                     "x": {"field": "x-axis LEO max 1990 distance", "type": "quantitative"},
                     "text": {"field": "display LEO max 1990 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 1990"},
         { "filter": {"field": "Orbit class", "equal": "Geosynchronous Equatorial Orbit"}},
         { "aggregate": [{"op": "min", "field": "Sin", "as": "min_sin_GEO"}] },
         { "calculate": "datum.min_sin_GEO * 0", "as": "y-axis zero" },
         { "calculate": "abs(round(datum.min_sin_GEO)) + 'km'", "as": "display GEO max 1990 kms"}, 
         { "calculate": "abs(datum.min_sin_GEO)", "as": "x-axis GEO max 1990 distance" } ],
       "mark": {"type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "center", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis zero", "type":  "quantitative"},
                     "x": {"field": "x-axis GEO max 1990 distance", "type": "quantitative"},
                     "text": {"field": "display GEO max 1990 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2006"},
         { "filter": {"field": "Orbit class", "equal": "Low Earth Orbit"}},
         { "aggregate": [{"op": "max", "field": "Cos", "as": "max_sin_LEO"}] },
         { "calculate": "datum.max_sin_LEO * 0", "as": "x-axis zero" },
         { "calculate": "abs(round(datum.max_sin_LEO)) + 'km'", "as": "display LEO min 2006 kms"}, 
         { "calculate": "abs(datum.max_sin_LEO) * -1", "as": "y-axis LEO min 2006 distance" } ],
       "mark": { "type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "left", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis LEO min 2006 distance", "type":  "quantitative"},
                     "x": {"field": "x-axis zero", "type":  "quantitative"},
                     "text": {"field": "display LEO min 2006 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2006"},
         { "filter": {"field": "Orbit class", "equal": "Low Earth Orbit"}},
         { "aggregate": [{"op": "median", "field": "Cos", "as": "med_sin_LEO"}] },
         { "calculate": "datum.med_sin_LEO * 0", "as": "x-axis zero" },
         { "calculate": "abs(round(datum.med_sin_LEO)) + 'km'", "as": "display LEO med 2006 kms"}, 
         { "calculate": "abs(datum.med_sin_LEO) * -1", "as": "y-axis LEO med 2006 distance" } ],
       "mark": { "type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "left", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis LEO med 2006 distance", "type":  "quantitative"},
                     "x": {"field": "x-axis zero", "type":  "quantitative"},
                     "text": {"field": "display LEO med 2006 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2006"},
         { "filter": {"field": "Orbit class", "equal": "Low Earth Orbit"}},
         { "aggregate": [{"op": "min", "field": "Cos", "as": "min_sin_LEO"}] },
         { "calculate": "datum.min_sin_LEO * 0", "as": "x-axis zero" },
         { "calculate": "abs(round(datum.min_sin_LEO)) + 'km'", "as": "display LEO max 2006 kms"}, 
         { "calculate": "abs(datum.min_sin_LEO) * -1", "as": "y-axis LEO max 2006 distance" } ],
       "mark": { "type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "left", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis LEO max 2006 distance", "type":  "quantitative"},
                     "x": {"field": "x-axis zero", "type":  "quantitative"},
                     "text": {"field": "display LEO max 2006 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2006"},
         { "filter": {"field": "Orbit class", "equal": "Medium Earth Orbit"}},
         { "aggregate": [{"op": "min", "field": "Cos", "as": "min_sin_MEO"}] },
         { "calculate": "datum.min_sin_MEO * 0", "as": "x-axis zero" },
         { "calculate": "abs(round(datum.min_sin_MEO)) + 'km'", "as": "display MEO max 2006 kms"}, 
         { "calculate": "abs(datum.min_sin_MEO) * -1", "as": "y-axis MEO max 2006 distance" } ],
       "mark": { "type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "left", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis MEO max 2006 distance", "type":  "quantitative"},
                     "x": {"field": "x-axis zero", "type":  "quantitative"},
                     "text": {"field": "display MEO max 2006 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2006"},
         { "filter": {"field": "Orbit class", "equal": "Geosynchronous Equatorial Orbit"}},
         { "aggregate": [{"op": "min", "field": "Cos", "as": "min_sin_GEO"}] },
         { "calculate": "datum.min_sin_GEO * 0", "as": "x-axis zero" },
         { "calculate": "abs(round(datum.min_sin_GEO)) + 'km'", "as": "display GEO max 2006 kms"}, 
         { "calculate": "abs(datum.min_sin_GEO) * -1", "as": "y-axis GEO max 2006 distance" } ],
       "mark": {"type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "left", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis GEO max 2006 distance", "type": "quantitative"},
                     "x": {"field": "x-axis zero", "type":  "quantitative"},
                     "text": {"field": "display GEO max 2006 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2021"},
         { "filter": {"field": "Orbit class", "equal": "Low Earth Orbit"}},
         { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin_LEO"}] },
         { "calculate": "datum.max_sin_LEO * 0", "as": "y-axis zero" },
         { "calculate": "abs(round(datum.max_sin_LEO)) + 'km'", "as": "display LEO min 2021 kms"}, 
         { "calculate": "abs(datum.max_sin_LEO) * -1", "as": "x-axis LEO min 2021 distance" } ],
       "mark": {"type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "center", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis zero", "type":  "quantitative"},
                     "x": {"field": "x-axis LEO min 2021 distance", "type": "quantitative"},
                     "text": {"field": "display LEO min 2021 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2021"},
         { "filter": {"field": "Orbit class", "equal": "Low Earth Orbit"}},
         { "aggregate": [{"op": "median", "field": "Sin", "as": "med_sin_LEO"}] },
         { "calculate": "datum.med_sin_LEO * 0", "as": "y-axis zero" },
         { "calculate": "abs(round(datum.med_sin_LEO)) + 'km'", "as": "display LEO med 2021 kms"}, 
         { "calculate": "abs(datum.med_sin_LEO) * -1", "as": "x-axis LEO med 2021 distance" } ],
       "mark": {"type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "center", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis zero", "type": "quantitative"},
                     "x": {"field": "x-axis LEO med 2021 distance", "type": "quantitative"},
                     "text": {"field": "display LEO med 2021 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2021"},
         { "filter": {"field": "Orbit class", "equal": "Low Earth Orbit"}},
         { "aggregate": [{"op": "min", "field": "Sin", "as": "min_sin_LEO"}] },
         { "calculate": "datum.min_sin_LEO * 0", "as": "y-axis zero" },
         { "calculate": "abs(round(datum.min_sin_LEO)) + 'km'", "as": "display LEO max 2021 kms"}, 
         { "calculate": "abs(datum.min_sin_LEO) * -1", "as": "x-axis LEO max 2021 distance" } ],
       "mark": {"type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "center", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis zero", "type": "quantitative"},
                     "x": {"field": "x-axis LEO max 2021 distance", "type": "quantitative"},
                     "text": {"field": "display LEO max 2021 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2021"},
         { "filter": {"field": "Orbit class", "equal": "Medium Earth Orbit"}},
         { "aggregate": [{"op": "min", "field": "Sin", "as": "min_sin_MEO"}] },
         { "calculate": "datum.min_sin_MEO * 0", "as": "y-axis zero" },
         { "calculate": "abs(round(datum.min_sin_MEO)) + 'km'", "as": "display MEO max 2021 kms"}, 
         { "calculate": "abs(datum.min_sin_MEO) * -1", "as": "x-axis MEO max 2021 distance" } ],
       "mark": {"type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "center", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis zero", "type":  "quantitative"},
                     "x": {"field": "x-axis MEO max 2021 distance", "type": "quantitative"},
                     "text": {"field": "display MEO max 2021 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
         { "timeUnit": "year", "field": "Launch date", "as": "date"},
         { "filter": "year(datum.date) == 2021"},
         { "filter": {"field": "Orbit class", "equal": "Geosynchronous Equatorial Orbit"}},
         { "aggregate": [{"op": "min", "field": "Sin", "as": "min_sin_GEO"}] },
         { "calculate": "datum.min_sin_GEO * 0", "as": "y-axis zero" },
         { "calculate": "abs(round(datum.min_sin_GEO)) + 'km'", "as": "display GEO max 2021 kms"}, 
         { "calculate": "abs(datum.min_sin_GEO) * -1", "as": "x-axis GEO max 2021 distance" } ],
       "mark": {"type": "text", "style": "label", "angle": 0, "baseline": "bottom", "align": "center", "fontSize": 16 },
       "encoding": { "y": {"field": "y-axis zero", "type":  "quantitative"},
                     "x": {"field": "x-axis GEO max 2021 distance", "type": "quantitative"},
                     "text": {"field": "display GEO max 2021 kms", "type": "nominal"},
                     "color": {"value": "#AAB6C4"} }
     },
     { "transform": [
            { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
            { "calculate": "datum.max_sin * 0", "as": "x-axis zero for vertical rule" } ],
       "mark": {"type": "rule",
                "strokeDash": [1, 10],
                "strokeDashOffset": 50000},
       "encoding": { "x": { "field": "x-axis zero for vertical rule",
                            "type": "quantitative"},
                            "color": {"value": "#9DA4AC"},
                            "size": {"value": 1} }
     },
     { "transform": [
            { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
            { "calculate": "datum.max_sin * 0", "as": "y-axis zero for horizontal rule" } ],
       "mark": {"type": "rule",
                "strokeDash": [1, 10],
                "strokeDashOffset": 50000},
       "encoding": { "y": { "field": "y-axis zero for horizontal rule",
                            "type": "quantitative"},
                            "color": {"value": "#9DA4AC"},
                            "size": {"value": 1} }
     },
     { "transform": [
            { "aggregate": [{"op": "max", "field": "Sin", "as": "max_sin"}] },
            { "calculate": "datum.max_sin * 0", "as": "origin zero" } ],
       "mark": {"type": "image",
                "width": 75,
                "height": 75},
       "encoding": { "x": { "aggregate": "median",
                            "field": "origin zero",
                            "type": "quantitative"},
                     "y": { "aggregate": "median",
                            "field": "origin zero",
                            "type": "quantitative"},
                     "url": { "datum": "data:image/png;base64,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",
                              "type":  "nominal"}
                   }
     },
     { "params": [{ "name": "grid",
                    "select": "interval",
                    "bind": "scales"},
                  { "name": "legend",
                    "select": {"type": "point", "fields": ["Orbit class"]},
                    "bind": "legend"} ],
       "mark": { "type": "point", 
                 "shape": "circle",
                 "tooltip": true,
                 "filled": true,
                 "fillOpacity": 0.75},
       "encoding": { "x": { "field": "Sin", 
                            "type": "quantitative",
                            "title": false, 
                            "axis": {"disable": true,
                                     "grid": false,
                                     "labels": false},
                                     "scale": {"domain": [-70400,70050]}},
                      "y": { "field": "Cos", 
                             "type": "quantitative",
                             "title": false, 
                             "axis": {"disable": true,
                                      "grid": false,
                                      "labels": false},
                                      "scale": {"domain": [-69540,60370]}},
                      "size": {"value": 50},
                      "color": { "field": "Orbit class",
                                 "type":  "nominal",
                                 "sort": [ "Geostationary Transfer Orbit", "Geosynchronous Equatorial Orbit", "Medium Earth Orbit", "Low Earth Orbit"],
                                 "scale": {"range": ["#C8F6FF", "#8DECFF", "#2DDBFF", "#11BBDE" ]} },
                      "opacity": { "condition": {"param": "legend", "value": 1},
                                   "value": 0.025 },
                      "tooltip": [ {"field": "Satellite catalog number (NORAD)", "type": "nominal", "title": "NORAD"},
                                   {"field": "International designator (COSPAR)", "title": "COSPAR"},
                                   {"field": "Name", "title": "SATELLITE"},
                                   {"field": "Country", "title": "COUNTRY"},
                                   {"field": "Purpose", "title": "PURPOSE"},
                                   {"field": "Users", "title": "USERS"},
                                   {"field": "Launch date", "title": "LAUNCH DATE", "type": "temporal", "format": "%d-%m-%Y (DMY)"},
                                   {"field": "Status", "title": "STATUS"},
                                   {"field": "Orbit class", "title": "ORBIT CLASS"},
                                   {"field": "Distance (km)", "title": "AVERAGE DISTANCE (km)", "type": "nominal", "format": ",.0f"},
                                   {"field": "Apogee (km)", "title": "APOGEE (km)", "type": "nominal", "format": ",.0f"},
                                   {"field": "Perigee (km)", "title": "PERIGEE (km)", "type": "nominal", "format": ",.0f"},
                                   {"field": "Launch site", "title": "LAUNCH SITE"},
                                   {"field": "Launch vehicle", "title": "LAUNCH VEHICLE"}] }
     }
    ],
    "config": {
      "legend": {"title": "null",
                 "titleColor": "#ffffff",
                 "labelColor": "#ffffff",
                 "labelFontSize": 10,
                 "labelFont": "Consolas",
                 "orient": "top-left",
                 "labelLimit": 260  }
    }
}
```

Click **[here](https://github.com/datamesse/datamesse.github.io/blob/main/src/posts/2022-08-27.md)** for this post's markdown file in GitHub.